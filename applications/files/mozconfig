# Custom GCC
export CC=/usr/local/software/spack/spack-views/rocky8-icelake-20220710/gcc-11.3.0/gcc-11.3.0/4zpip55j2rww33vhy62jl4eliwynqfru/bin/gcc
export CXX=/usr/local/software/spack/spack-views/rocky8-icelake-20220710/gcc-11.3.0/gcc-11.3.0/4zpip55j2rww33vhy62jl4eliwynqfru/bin/g++

# Use BFD linker
ac_add_options --enable-linker=bfd

# Set target platform
ac_add_options --target=x86_64-unknown-linux-gnu

# Sysroot setup
export SYSROOT=/home/jhz22/.mozbuild/sysroot-x86_64-linux-gnu
export BINDGEN_EXTRA_CLANG_ARGS="--sysroot=$SYSROOT/usr -I/usr/include -I/usr/include/x86_64-linux-gnu"
export CFLAGS="--sysroot=$SYSROOT -I$SYSROOT/usr/include -I/usr/local/Cluster-Apps/ceuadmin/alsa-lib/1.2.14/include -m64"
export CXXFLAGS="--sysroot=$SYSROOT -I$SYSROOT/usr/include -I/usr/local/Cluster-Apps/ceuadmin/alsa-lib/1.2.14/include -m64"
export LDFLAGS="--sysroot=$SYSROOT -L$SYSROOT/usr/lib64/x86_64-linux-gnu -L/usr/local/Cluster-Apps/ceuadmin/alsa-lib/1.2.14/lib -m64"

# pkg-config path to ALSA .pc
export PKG_CONFIG_PATH=/usr/local/Cluster-Apps/ceuadmin/alsa-lib/1.2.14/lib/pkgconfig

# Rust linker
export CARGO_TARGET_X86_64_UNKNOWN_LINUX_GNU_LINKER=$CC

# Object directory
mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj-source

# Build options
mk_add_options MOZ_MAKE_FLAGS="-j5"
ac_add_options --disable-debug
ac_add_options --enable-optimize
